{% extends 'base.html' %}

{% block title %}User Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <h2>Overview</h2>

    <div class="cards-grid">
        <div class="card">
            <h3>Popular Destinations</h3>
            <div class="card-list">
                {% for destination in popular_destinations %}
                <div class="dest-card">
                    {% if destination.image %}
                    <img src="{{ destination.image }}" alt="{{ destination.name }}" class="dest-image">
                    {% endif %}
                    <div class="dest-info">
                        <strong>{{ destination.name }}</strong>
                        <div>Bookings: {{ destination.booking_count }}</div>
                    </div>
                </div>
                {% empty %}
                <div>No popular destinations yet.</div>
                {% endfor %}
            </div>
        </div>

        <div class="card">
            <h3>Destination with Most Attractions</h3>
            {% if destination_most_attractions %}
            <div class="dest-card single">
                {% if destination_most_attractions.image %}
                <img src="{{ destination_most_attractions.image }}" alt="{{ destination_most_attractions.name }}" class="dest-image">
                {% endif %}
                <div class="dest-info">
                    <strong>{{ destination_most_attractions.name }}</strong>
                    <div>Attractions: {{ destination_most_attractions.attraction_count }}</div>
                </div>
            </div>
            {% else %}
            <div>No data available.</div>
            {% endif %}
        </div>

        <div class="card">
            <h3>Recently Booked Destinations</h3>
            <div class="card-list">
                {% for destination in recent_popular_destinations %}
                <div class="dest-card">
                    {% if destination.image %}
                    <img src="{{ destination.image }}" alt="{{ destination.name }}" class="dest-image">
                    {% endif %}
                    <div class="dest-info">
                        <strong>{{ destination.name }}</strong>
                        <div>Last booked: {{ destination.last_booked }}</div>
                    </div>
                </div>
                {% empty %}
                <div>No recent bookings yet.</div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
<style>
    .dashboard-container {
        /* Use full available width inside the `.content` area */
        width: 100%;
        max-width: none;
        margin: 0;
        padding: 12px 0;
        box-sizing: border-box;
    }
    .cards-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        align-items: start;
    }
    .card { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
    .card-list { display:flex; flex-direction:column; gap:12px; }
    .dest-card { display:flex; gap:12px; align-items:center; }
    .dest-card.single { align-items:flex-start; }
    .dest-image { width:80px; height:60px; object-fit:cover; border-radius:6px; }
    .dest-info { font-size:14px; }
    @media (max-width:900px) { .cards-grid { grid-template-columns: 1fr; } }
</style>

<!-- No slideshow JS: dashboard uses simple cards for clarity -->
{% endblock %}
